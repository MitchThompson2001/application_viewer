<!-- Name: Mitchell Thompson
File: locationList.html
Project: Data Viewer Application -->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Location List</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <style>
    body {
      background: #f8f9fa;
      min-height: 100vh;
    }
    h3 {
      margin-bottom: 1.5rem;
      font-weight: 600;
      color: #343a40;
    }
    .form-label {
      font-weight: 500;
    }
    table {
      background: white;
      box-shadow: 0 0.15rem 0.3rem rgba(0,0,0,0.1);
      border-radius: 0.25rem;
    }
    th a {
      color: inherit;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
    }
    th a:hover {
      text-decoration: underline;
    }
    th a .sort-indicator {
      margin-left: 0.25rem;
      font-size: 0.75rem;
      user-select: none;
    }
  </style>
</head>
<body>
  <div th:replace="~{fragments/navbar :: navbar}"></div>
  <div class="container my-4">
    <h3>Location List</h3>
    <div class="row">
      <!-- Search form column -->
      <div class="col-md-4 mb-4">
        <form method="get" action="/location_list" class="card p-3 shadow-sm">
          <div class="mb-3">
            <label for="id" class="form-label">Location ID</label>
            <input
              type="text"
              id="id"
              name="id"
              th:value="${id}"
              class="form-control"
              placeholder="Enter Location ID"
            />
          </div>
          <div class="mb-3">
            <label for="phoneNumber" class="form-label">Phone Number</label>
            <input
              type="text"
              id="phoneNumber"
              name="phoneNumber"
              th:value="${phoneNumber}"
              class="form-control"
              placeholder="Enter Phone Number"
            />
          </div>
          <div class="mb-3">
            <label for="faxNumber" class="form-label">Fax Number</label>
            <input
              type="text"
              id="faxNumber"
              name="faxNumber"
              th:value="${faxNumber}"
              class="form-control"
              placeholder="Enter Fax Number"
            />
          </div>
          <div class="mb-3">
            <label for="locationName" class="form-label">Location Name</label>
            <input
              type="text"
              id="locationName"
              name="locationName"
              th:value="${locationName}"
              class="form-control"
              placeholder="Enter Location Name"
            />
          </div>
          <div class="mb-3">
            <label for="streetAddress" class="form-label">Street Address</label>
            <input
              type="text"
              id="streetAddress"
              name="streetAddress"
              th:value="${streetAddress}"
              class="form-control"
              placeholder="Enter Street Address"
            />
          </div>
          <div class="mb-3">
            <label for="city" class="form-label">City</label>
            <input
              type="text"
              id="city"
              name="city"
              th:value="${city}"
              class="form-control"
              placeholder="Enter City"
            />
          </div>
          <div class="mb-3">
            <label for="state" class="form-label">State</label>
            <input
              type="text"
              id="state"
              name="state"
              th:value="${state}"
              class="form-control"
              placeholder="Enter State"
            />
          </div>
          <div class="mb-3">
            <label for="zipCode" class="form-label">ZIP Code</label>
            <input
              type="text"
              id="zipCode"
              name="zipCode"
              th:value="${zipCode}"
              class="form-control"
              placeholder="Enter ZIP Code"
            />
          </div>
          <button type="submit" class="btn btn-primary w-100 mb-2">Search</button>
          <button type="button" class="btn btn-outline-secondary w-100" id="resetBtn">Reset</button>
        </form>
      </div>

      <!-- Table column -->
      <div class="col-md-8">
        <div class="table-responsive shadow-sm rounded">
          <table class="table table-striped mb-0">
            <thead class="table-light">
              <tr>
                <th>
                  <a
                    th:href="@{/location_list(
                      id=${id},
                      phoneNumber=${phoneNumber},
                      faxNumber=${faxNumber},
                      locationName=${locationName},
                      streetAddress=${streetAddress},
                      city=${city},
                      state=${state},
                      zipCode=${zipCode},
                      sortField='id',
                      sortDir=${sortField == 'id' and sortDir == 'asc' ? 'desc' : 'asc'}
                    )}"
                  >
                    Location ID
                    <span
                      class="sort-indicator"
                      th:if="${sortField == 'id'}"
                      th:text="${sortDir == 'asc' ? '▲' : '▼'}"
                    ></span>
                  </a>
                </th>
                <th>
                  <a
                    th:href="@{/location_list(
                      id=${id},
                      phoneNumber=${phoneNumber},
                      faxNumber=${faxNumber},
                      locationName=${locationName},
                      streetAddress=${streetAddress},
                      city=${city},
                      state=${state},
                      zipCode=${zipCode},
                      sortField='phoneNumber',
                      sortDir=${sortField == 'phoneNumber' and sortDir == 'asc' ? 'desc' : 'asc'}
                    )}"
                  >
                    Phone Number
                    <span
                      class="sort-indicator"
                      th:if="${sortField == 'phoneNumber'}"
                      th:text="${sortDir == 'asc' ? '▲' : '▼'}"
                    ></span>
                  </a>
                </th>
                <th>
                  <a
                    th:href="@{/location_list(
                      id=${id},
                      phoneNumber=${phoneNumber},
                      faxNumber=${faxNumber},
                      locationName=${locationName},
                      streetAddress=${streetAddress},
                      city=${city},
                      state=${state},
                      zipCode=${zipCode},
                      sortField='faxNumber',
                      sortDir=${sortField == 'faxNumber' and sortDir == 'asc' ? 'desc' : 'asc'}
                    )}"
                  >
                    Fax Number
                    <span
                      class="sort-indicator"
                      th:if="${sortField == 'faxNumber'}"
                      th:text="${sortDir == 'asc' ? '▲' : '▼'}"
                    ></span>
                  </a>
                </th>
                <th>
                  <a
                    th:href="@{/location_list(
                      id=${id},
                      phoneNumber=${phoneNumber},
                      faxNumber=${faxNumber},
                      locationName=${locationName},
                      streetAddress=${streetAddress},
                      city=${city},
                      state=${state},
                      zipCode=${zipCode},
                      sortField='locationName',
                      sortDir=${sortField == 'locationName' and sortDir == 'asc' ? 'desc' : 'asc'}
                    )}"
                  >
                    Location Name
                    <span
                      class="sort-indicator"
                      th:if="${sortField == 'locationName'}"
                      th:text="${sortDir == 'asc' ? '▲' : '▼'}"
                    ></span>
                  </a>
                </th>
                <th>
                  <a
                    th:href="@{/location_list(
                      id=${id},
                      phoneNumber=${phoneNumber},
                      faxNumber=${faxNumber},
                      locationName=${locationName},
                      streetAddress=${streetAddress},
                      city=${city},
                      state=${state},
                      zipCode=${zipCode},
                      sortField='streetAddress',
                      sortDir=${sortField == 'streetAddress' and sortDir == 'asc' ? 'desc' : 'asc'}
                    )}"
                  >
                    Street Address
                    <span
                      class="sort-indicator"
                      th:if="${sortField == 'streetAddress'}"
                      th:text="${sortDir == 'asc' ? '▲' : '▼'}"
                    ></span>
                  </a>
                </th>
                <th>
                  <a
                    th:href="@{/location_list(
                      id=${id},
                      phoneNumber=${phoneNumber},
                      faxNumber=${faxNumber},
                      locationName=${locationName},
                      streetAddress=${streetAddress},
                      city=${city},
                      state=${state},
                      zipCode=${zipCode},
                      sortField='city',
                      sortDir=${sortField == 'city' and sortDir == 'asc' ? 'desc' : 'asc'}
                    )}"
                  >
                    City
                    <span
                      class="sort-indicator"
                      th:if="${sortField == 'city'}"
                      th:text="${sortDir == 'asc' ? '▲' : '▼'}"
                    ></span>
                  </a>
                </th>
                <th>
                  <a
                    th:href="@{/location_list(
                      id=${id},
                      phoneNumber=${phoneNumber},
                      faxNumber=${faxNumber},
                      locationName=${locationName},
                      streetAddress=${streetAddress},
                      city=${city},
                      state=${state},
                      zipCode=${zipCode},
                      sortField='state',
                      sortDir=${sortField == 'state' and sortDir == 'asc' ? 'desc' : 'asc'}
                    )}"
                  >
                    State
                    <span
                      class="sort-indicator"
                      th:if="${sortField == 'state'}"
                      th:text="${sortDir == 'asc' ? '▲' : '▼'}"
                    ></span>
                  </a>
                </th>
                <th>
                  <a
                    th:href="@{/location_list(
                      id=${id},
                      phoneNumber=${phoneNumber},
                      faxNumber=${faxNumber},
                      locationName=${locationName},
                      streetAddress=${streetAddress},
                      city=${city},
                      state=${state},
                      zipCode=${zipCode},
                      sortField='zipCode',
                      sortDir=${sortField == 'zipCode' and sortDir == 'asc' ? 'desc' : 'asc'}
                    )}"
                  >
                    ZIP Code
                    <span
                      class="sort-indicator"
                      th:if="${sortField == 'zipCode'}"
                      th:text="${sortDir == 'asc' ? '▲' : '▼'}"
                    ></span>
                  </a>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="location : ${allLocList}">
                <td th:text="${location.id}">123</td>
                <td th:text="${location.phoneNumber}">123-456-7890</td>
                <td th:text="${location.faxNumber}">123-456-7899</td>
                <td th:text="${location.locationName}">Main Office</td>
                <td th:text="${location.streetAddress}">123 Main St</td>
                <td th:text="${location.city}">Springfield</td>
                <td th:text="${location.state}">IL</td>
                <td th:text="${location.zipCode}">62704</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Phone number formatting
        const phoneInput = document.getElementById("phoneNumber");
        if (phoneInput) {
          phoneInput.addEventListener("input", function (e) {
            let value = e.target.value.replace(/\D/g, ""); // digits only
            if (value.length > 10) value = value.slice(0, 10);

            const parts = [];
            if (value.length > 0) parts.push(value.substring(0, 3));
            if (value.length >= 4) parts.push(value.substring(3, 6));
            if (value.length >= 7) parts.push(value.substring(6));

            e.target.value = parts.join("-");
          });
        }

        // fax number formatting
        const faxInput = document.getElementById("faxNumber");
        if (faxInput) {
          faxInput.addEventListener("input", function (e) {
            let value = e.target.value.replace(/\D/g, ""); // digits only
            if (value.length > 10) value = value.slice(0, 10);

            const parts = [];
            if (value.length > 0) parts.push(value.substring(0, 3));
            if (value.length >= 4) parts.push(value.substring(3, 6));
            if (value.length >= 7) parts.push(value.substring(6));

            e.target.value = parts.join("-");
          });
        }

        // ZIP code formatting
        const zipInput = document.getElementById("zipCode");
        if (faxInput) {
          zipInput.addEventListener("input", function (e) {
            let value = e.target.value.replace(/\D/g, ""); // digits only
            if (value.length > 5) value = value.slice(0, 5);

            e.target.value = value;
          });
        }

        // Reset button behavior
        const resetBtn = document.getElementById("resetBtn");
        resetBtn?.addEventListener("click", function () {
          window.location.href = "/location_list";
        });
      });
</script>
</body>
</html>
